# Quest 11. RDB의 기초와 ORM

## Introduction

- 이번 퀘스트에서는 데이터베이스를 다루는 방법에 대해 알아보겠습니다.

## Topics

- RDBMS
- MySQL
- ORM
- Hash
  - scrypt

## Resources

- [MySQL 101 – The basics](https://www.globo.tech/learning-center/mysql-101-basics/)
- [Sequelize](https://sequelize.org/)
- [안전한 패스워드 저장](https://d2.naver.com/helloworld/318732)

## Checklist

- RDBMS 테이블의 정규화는 무엇인가요?

  중복된 데이터를 허용하지 않음으로써 무결성을 유지하는 것을 의미한다.

- MySQL 외의 RDB에는 어떤 것들이 있나요?

  Oracle: 유닉스 환경, 전세계에서 가장 많이 사용하고 있는 RDBMS이다.
  Microsoft SQL server: 마이크로소프트에서 개발한 RDBMS로 윈도우 환경에서 많이 사용된다.
  SQLite: 별도의 DB서버로 구동되지 않고, 프로그램에 포함된 라이브러리 형태로 동작하며 안드로이드, 아이폰과 같이 모바일 환경에서 많이 사용된다.

  - Relational Database 외에 다른 DB에는 어떤 것들이 있을까요?

    NoSQL: RDBMS는 빅데이터를 다룰 때 기존 트래픽을 감당하기에는 어려움이 있어 탄생하였다. 고정된 스키마가 존재하지 않으며 Key-Value가 하나의 묶음으로 된 Key-Value 데이터베이스, 데이터를 노드와 엣지로 표현하는 Graph 데이터베이스, 레코드마다 다른 스키마(XML, JSON)를 가질 수 있는 Document 데이터베이스 등이 존재한다.

- RDBMS에서 테이블의 인덱싱은 무엇인가요? 인덱싱을 하면 어떤 점이 다르며, 어떤 식으로 동작하나요?

  인덱스는 데이터베이스 테이블의 검색 속도를 향상시키기 위한 자료구조이다. 테이블 내의 1개 혹은 여러 개의 컬럼에 인덱스를 생성하면 해당 칼럼을 키로 삼아, 각각의 키에 해당하는 데이터의 물리적 주소가 같이 저장된다. 따라서 데이터의 규모가 큰 경우, 원하는 데이터를 찾기 위해 인덱스를 이용하면 빠르게 조회가 가능하다.

- ORM을 사용하는 것은 사용하지 않는 것에 비해 어떤 장단점을 가지고 있나요?

  개발자가 SQL문을 사용하지 않고 클래스의 메서드를 통해 조작할 수 있어 코드의 가독성을 높일 수 있고, 객체지향적 접근만 고려하면 되기 때문에 생산성이 증가한다. 그러나 구현을 잘못한 경우, 속도 저하 및 일관성이 무너질 수 있으며 복잡한 SQL문인 경우 SQL문이 오히려 효율이 높을 수 있다.

  - 자바스크립트 생태계의 ORM에는 어떤 것들이 있나요?

    Sequelize는 프로미스 기반으로 then, catch를 사용하며 모듈을 통해 디비와 연결한다. findOne, update, delete를 통해 조회, 수정, 삭제가 가능하다. TypeORM 은 자바스크립트뿐만 아니라 타입스크립트에서도 사용 가능하다.

- 모델간의 1:1, 1:N, N:M 관계는 각각 무엇이고 어떨 때 사용하나요?

  1:1 관계는 하나의 레코드가 다른 테이블의 레코드 한 개와 연결된 경우를 뜻하고, 1:N관계는 하나의 레코드가 서로 다른 여러 개의 레코드와 연결되는 것을 말한다. N:M은 여러 개의 레코드가 다른 테이블의 여러 개의 레코드와 관계가 있는 경우이다.

- DB에 사용자의 암호를 평문으로 저장하지 않고도 사용자의 암호를 인증하는 것이 가능한 이유는 무엇일까요?

  양방향(대칭키, 비대칭키)인 경우에는, 키를 사용하여 데이터를 암호화하며, 같은 키 혹은 다른 키를 이용해 암호문을 복호화할 수 있기 때문에 인증이 가능하다.

  단방향(해시)인 경우에는 서버에서 정한 알고리즘으로 데이터가 암호화된 것이 DB에 저장되며 이를 복호화하는 것은 힘들지만, 기존암호를 입력하면 결국 같은 알고리즘을 통해 똑같은 값이 나오기 때문에 인증이 가능하다.

  - 해시 함수에는 어떤 것이 있나요?

    단방향 해시 함수로는 SHA, MD, HAS 등이 존재한다.

  - 사용자의 암호를 해싱하여 저장할 때 어떤 식으로 저장하는 것이 보안에 좋을까요?

    사용자의 암호에 사용자별 다른 문자열을 솔팅하고 해시함수를 여러 번 수행한다. DB에는 사용자의 아이디와 해싱된 암호(다이제스트), 사용자 고유의 솔트를 저장한다.

## Quest

- 이번에는 메모장을 파일이 아닌 DB기반으로 만들어 보고자 합니다.
  - 적절한 테이블을 설계해 보세요.
  - Sequelize를 이용하여 데이터의 모델을 만들고 어플리케이션에 적용해 보세요.
  - 사용자의 비밀번호는 해싱을 통해 저장되어야 합니다.

## Advanced

- Object–relational impedance mismatch란 어떤 개념인가요?
- Foreign Key란 무엇인가요? 이것을 사용할 때의 장점과 단점은 무엇일까요?
- 이전에 쓰이던 해시함수들에는 어떤 것이 있을까요? 패스워드 해싱의 추세의 역사는 어떻게 이어져왔나요?
